var esp=function(){var n={is:{}};n.is.VERSION="0.8.0",n.is.not={},n.is.all={},n.is.any={},n.is.windowObject=function(n){return null!=n&&"object"==typeof n&&"setInterval"in n};var i=Object.prototype.toString,t=Array.prototype.slice,o=Object.prototype.hasOwnProperty;function e(n){return function(){return!n.apply(null,t.call(arguments))}}function r(n){return function(){for(var i=c(arguments),t=i.length,o=0;o<t;o++)if(!n.call(null,i[o]))return!1;return!0}}function s(n){return function(){for(var i=c(arguments),t=i.length,o=0;o<t;o++)if(n.call(null,i[o]))return!0;return!1}}var a={"<":function(n,i){return n<i},"<=":function(n,i){return n<=i},">":function(n,i){return n>i},">=":function(n,i){return n>=i}};function u(n,i){var t=i+"",o=+(t.match(/\d+/)||NaN),e=t.match(/^[<>]=?|/)[0];return a[e]?a[e](n,o):n==o||o!=o}function c(n){var i=t.call(n);return 1===i.length&&is.array(i[0])&&(i=i[0]),i}n.is.function=function(n){return"[object Function]"===i.call(n)||"function"==typeof n};var l=n.is.windowObject("object"==typeof global&&global)&&global,f=n.is.windowObject("object"==typeof self&&self)&&self,d=n.is.windowObject("object"==typeof this&&this)&&this,p=l||f||d||Function("return this")(),h=f&&f.document,b=(p.is,f&&f.navigator),v=(b&&b.platform||"").toLowerCase(),w=(b&&b.userAgent||"").toLowerCase(),g=(b&&b.vendor||"").toLowerCase();n.is.android=function(){return/android/.test(w)},n.is.android.api=["not"],n.is.androidPhone=function(){return/android/.test(w)&&/mobile/.test(w)},n.is.androidPhone.api=["not"],n.is.androidTablet=function(){return/android/.test(w)&&!/mobile/.test(w)},n.is.androidTablet.api=["not"],n.is.blackberry=function(){return/blackberry/.test(w)||/bb10/.test(w)},n.is.blackberry.api=["not"],n.is.chrome=function(i){var t=/google inc/.test(g)?w.match(/(?:chrome|crios)\/(\d+)/):null;return null!==t&&n.is.not.opera()&&u(t[1],i)},n.is.chrome.api=["not"],n.is.desktop=function(){return n.is.not.mobile()&&n.is.not.tablet()},n.is.desktop.api=["not"],n.is.edge=function(n){var i=w.match(/edge\/(\d+)/);return null!==i&&u(i[1],n)},n.is.edge.api=["not"],n.is.firefox=function(n){var i=w.match(/(?:firefox|fxios)\/(\d+)/);return null!==i&&u(i[1],n)},n.is.firefox.api=["not"],n.is.ie=function(n){var i=w.match(/(?:msie |trident.+?; rv:)(\d+)/);return null!==i&&u(i[1],n)},n.is.ie.api=["not"],n.is.ios=function(){return n.is.iphone()||n.is.ipad()||n.is.ipod()},n.is.ios.api=["not"],n.is.ipad=function(n){var i=w.match(/ipad.+?os (\d+)/);return null!==i&&u(i[1],n)},n.is.ipad.api=["not"],n.is.iphone=function(i){var t=n.is.ipad()?null:w.match(/iphone(?:.+?os (\d+))?/);return null!==t&&u(t[1]||1,i)},n.is.iphone.api=["not"],n.is.ipod=function(n){var i=w.match(/ipod.+?os (\d+)/);return null!==i&&u(i[1],n)},n.is.ipod.api=["not"],n.is.linux=function(){return/linux/.test(v)&&n.is.not.android()},n.is.linux.api=["not"],n.is.mac=function(){return/mac/.test(v)},n.is.mac.api=["not"],n.is.mobile=function(){return n.is.iphone()||n.is.ipod()||n.is.androidPhone()||n.is.blackberry()||n.is.windowsPhone()},n.is.mobile.api=["not"],n.is.offline=e(n.is.online),n.is.offline.api=["not"],n.is.online=function(){return!b||!0===b.onLine},n.is.online.api=["not"],n.is.opera=function(n){var i=w.match(/(?:^opera.+?version|opr)\/(\d+)/);return null!==i&&u(i[1],n)},n.is.opera.api=["not"],n.is.operaMini=function(n){var i=w.match(/opera mini\/(\d+)/);return null!==i&&u(i[1],n)},n.is.operaMini.api=["not"],n.is.phantom=function(n){var i=w.match(/phantomjs\/(\d+)/);return null!==i&&u(i[1],n)},n.is.phantom.api=["not"],n.is.safari=function(n){var i=w.match(/version\/(\d+).+?safari/);return null!==i&&u(i[1],n)},n.is.safari.api=["not"],n.is.tablet=function(){return n.is.ipad()||n.is.androidTablet()||n.is.windowsTablet()},n.is.tablet.api=["not"],n.is.touchDevice=function(){return!!h&&("ontouchstart"in f||"DocumentTouch"in f&&h instanceof DocumentTouch)},n.is.touchDevice.api=["not"],n.is.windows=function(){return/win/.test(v)},n.is.windows.api=["not"],n.is.windowsPhone=function(){return n.is.windows()&&/phone/.test(w)},n.is.windowsPhone.api=["not"],n.is.windowsTablet=function(){return n.is.windows()&&n.is.not.windowsPhone()&&/touch/.test(w)},n.is.windowsTablet.api=["not"],function(){var i=n.is;for(var t in i)if(o.call(i,t)&&n.is.function(i[t]))for(var a=i[t].api||["not","all","any"],u=0;u<a.length;u++)"not"===a[u]&&(n.is.not[t]=e(n.is[t])),"all"===a[u]&&(n.is.all[t]=r(n.is[t])),"any"===a[u]&&(n.is.any[t]=s(n.is[t]))}(),n.fetchAsyncSignals=function(n,i,t,o,e){console.log("Going to fetch signals for mode: "+n+" & source: "+i);var r="";switch(n){case 1:"undefined"!=typeof pbjs&&"function"==typeof pbjs.getUserIdsAsEids&&(r=pbjs.getUserIdsAsEids());break;case 2:"undefined"!=typeof owpbjs&&"function"==typeof owpbjs.getUserIdsAsEids&&(r=owpbjs.getUserIdsAsEids());break;case 3:case 4:"function"==typeof o&&(r=o(i));break;default:r=JSON.parse('{"source":"pubmatic","uids":[{"id":"hello-eids","atype":1}]}')}var s={};4==n?s[i]="1||"+m(r):r.forEach(function(n){s[n.source]=!0===t?"1||"+m(n):n.uids[0].id});var a=Promise.resolve(s[i]);return console.log("fetching Signal: "+s[i]),a};var m=function(n){return btoa(JSON.stringify(n))};return n.registerSignalSources=function(i,t,o,e,r,s){i.encryptedSignalProviders=i.encryptedSignalProviders||[],t.forEach(function(t){console.log("Registering signal provider: "+t);var a=t;!0===e&&(a=t+"/enc"),4===o&&(a=t+"/"+s+"/enc"),i.encryptedSignalProviders.push({id:a,collectorFunction:function(){return n.fetchAsyncSignals(o,t,e,r,s)}})})},n}();
